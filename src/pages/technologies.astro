---
// src/pages/tecnologia.astro
import Layout from '../layouts/Layout.astro';

const stats = [
  { value: '98%', label: 'Mejora en Core Web Vitals', icon: 'Zap' },
  { value: '3x', label: 'Aumento en Conversiones', icon: 'TrendingUp' },
  { value: '<1s', label: 'Tiempo de Carga', icon: 'Clock' },
  { value: '150+', label: 'Proyectos Exitosos', icon: 'Globe' },
];

const technologies = [
  'React', 'Next.js', 'TypeScript', 'Node.js', 'PostgreSQL', 
  'Tailwind CSS', 'Framer Motion', 'Three.js', 'Supabase', 'Vercel',
  'OpenAI', 'Stripe', 'AWS', 'Cloudflare'
];

const caseStudies = [
  {
    client: 'TechStart MX',
    industry: 'SaaS',
    results: [
      { metric: 'Conversiones', before: '2.1%', after: '8.7%' },
      { metric: 'Velocidad', before: '4.2s', after: '0.8s' },
      { metric: 'SEO Ranking', before: '#47', after: '#3' },
    ],
  },
  {
    client: 'EcoVerde Store',
    industry: 'E-commerce',
    results: [
      { metric: 'Ventas', before: '$15k/mes', after: '$58k/mes' },
      { metric: 'Bounce Rate', before: '72%', after: '34%' },
      { metric: 'Sesiones', before: '5k', after: '28k' },
    ],
  },
];
---

<Layout>
  <!-- Hero -->
  <section class="relative pt-32 pb-20 overflow-hidden z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="max-w-4xl">
        <span class="text-primary font-medium uppercase tracking-widest text-sm mb-4 block animate-on-scroll" data-animation="fade-in-down">
          Tecnolog√≠a
        </span>
        <h1 class="font-display text-5xl md:text-7xl font-bold mb-6 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          La Ciencia detr√°s de{' '}
          <span class="text-gradient">tus Resultados</span>
        </h1>
        <p class="text-xl text-muted-foreground max-w-2xl animate-on-scroll" data-animation="fade-in-up" data-delay="200">
          No solo prometemos resultados. Los garantizamos con m√©tricas 
          transparentes y tecnolog√≠a de √∫ltima generaci√≥n.
        </p>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section class="relative py-20 z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="glass-card text-center animate-on-scroll" data-animation="scale-in-bounce" data-delay="100">
          <span class="text-4xl mb-4 block">‚ö°</span>
          <div class="font-display text-4xl font-bold text-gradient mb-2">
            {stats[0].value}
          </div>
          <p class="text-sm text-muted-foreground">{stats[0].label}</p>
        </div>

        <div class="glass-card text-center animate-on-scroll" data-animation="scale-in-bounce" data-delay="200">
          <span class="text-4xl mb-4 block">üìà</span>
          <div class="font-display text-4xl font-bold text-gradient mb-2">
            {stats[1].value}
          </div>
          <p class="text-sm text-muted-foreground">{stats[1].label}</p>
        </div>

        <div class="glass-card text-center animate-on-scroll" data-animation="scale-in-bounce" data-delay="300">
          <span class="text-4xl mb-4 block">‚è±Ô∏è</span>
          <div class="font-display text-4xl font-bold text-gradient mb-2">
            {stats[2].value}
          </div>
          <p class="text-sm text-muted-foreground">{stats[2].label}</p>
        </div>

        <div class="glass-card text-center animate-on-scroll" data-animation="scale-in-bounce" data-delay="400">
          <span class="text-4xl mb-4 block">üåç</span>
          <div class="font-display text-4xl font-bold text-gradient mb-2">
            {stats[3].value}
          </div>
          <p class="text-sm text-muted-foreground">{stats[3].label}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- View Transitions Demo -->
  <section class="relative py-32 border-t border-white/5 z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <span class="text-primary font-medium uppercase tracking-widest text-sm mb-4 block animate-on-scroll" data-animation="fade-in-down">
          View Transitions
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold mb-6 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          Navegaci√≥n que{' '}
          <span class="text-gradient">Fluye</span>
        </h2>
        <p class="text-muted-foreground max-w-2xl mx-auto animate-on-scroll" data-animation="fade-in-up" data-delay="200">
          Eliminamos el "parpadeo" tradicional de las p√°ginas web. 
          Tu contenido fluye de manera cinematogr√°fica.
        </p>
      </div>

      <!-- Comparison -->
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto z-500">
        <div class="glass-card relative overflow-hidden animate-on-scroll" data-animation="slide-in-left" data-delay="300">
          <div class="absolute top-4 left-4 rounded-full bg-red-500/20 border border-red-500/50 px-3 py-1 text-xs text-red-400 animate-on-scroll" data-animation="fade-in" data-delay="500">
            Web Tradicional
          </div>
          <div class="pt-12">
            <div class="aspect-video bg-white/5 rounded-lg flex items-center justify-center border border-white/10 animate-on-scroll" data-animation="fade-in" data-delay="600">
              <div class="text-center">
                <div class="h-8 w-8 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin mx-auto mb-2" />
                <p class="text-xs text-muted-foreground">Cargando...</p>
              </div>
            </div>
            <p class="text-sm text-muted-foreground mt-4 text-center animate-on-scroll" data-animation="fade-in-up" data-delay="700">
              Pantalla en blanco, p√©rdida de contexto, usuario frustrado
            </p>
          </div>
        </div>

        <div class="glass-card-primary relative overflow-hidden animate-on-scroll z-500" data-animation="slide-in-right" data-delay="300">
          <div class="absolute top-4 left-4 rounded-full bg-primary/20 border border-primary/50 px-3 py-1 text-xs text-primary animate-on-scroll" data-animation="fade-in" data-delay="500">
            Mario's Agency
          </div>
          <div class="pt-12">
            <div class="aspect-video bg-gradient-to-br from-primary/10 to-accent/10 rounded-lg flex items-center justify-center border border-primary/20 animate-on-scroll" data-animation="fade-in" data-delay="600">
              <div class="text-center">
                <span class="text-4xl mb-2 block animate-on-scroll" data-animation="zoom-in" data-delay="700">‚ö°</span>
                <p class="text-xs text-primary animate-on-scroll" data-animation="fade-in-up" data-delay="800">Transici√≥n instant√°nea</p>
              </div>
            </div>
            <p class="text-sm text-muted-foreground mt-4 text-center animate-on-scroll" data-animation="fade-in-up" data-delay="700">
              Transiciones suaves, contexto preservado, experiencia premium
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tech Stack -->
  <section class="relative py-32 border-t border-white/5 z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <span class="text-primary font-medium uppercase tracking-widest text-sm mb-4 block animate-on-scroll" data-animation="fade-in-down">
          Stack Tecnol√≥gico
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold mb-6 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          Las Mejores{' '}
          <span class="text-gradient">Herramientas</span>
        </h2>
      </div>

      <div class="flex flex-wrap justify-center gap-4 max-w-3xl mx-auto z-500">
        {technologies.map((tech, index) => {
          const delay = (index * 50);
          return (
            <span
              class="tech-tag animate-on-scroll"
              data-animation="zoom-in"
              data-delay={delay}
            >
              {tech}
            </span>
          );
        })}
      </div>
    </div>
  </section>

  <!-- Case Studies -->
  <section class="relative py-32 border-t border-white/5 z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="text-center mb-16">
        <span class="text-primary font-medium uppercase tracking-widest text-sm mb-4 block animate-on-scroll" data-animation="fade-in-down">
          Casos de √âxito
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold mb-6 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          Resultados{' '}
          <span class="text-gradient">Comprobados</span>
        </h2>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto z-500">
        <div class="glass-card animate-on-scroll" data-animation="fade-in-up" data-delay="200">
          <div class="flex items-center justify-between mb-6 animate-on-scroll" data-animation="slide-in-left" data-delay="300">
            <div>
              <h3 class="font-display text-xl font-bold">{caseStudies[0].client}</h3>
              <p class="text-sm text-muted-foreground">{caseStudies[0].industry}</p>
            </div>
            <span class="text-4xl animate-on-scroll" data-animation="rotate-in" data-delay="400">üìä</span>
          </div>

          <div class="space-y-4 z-500">
            {caseStudies[0].results.map((result, idx) => (
              <div class="flex items-center justify-between animate-on-scroll" data-animation="fade-in-up" data-delay={400 + (idx * 100)}>
                <span class="text-sm text-muted-foreground">{result.metric}</span>
                <div class="flex items-center gap-3">
                  <span class="text-sm text-red-400 line-through">{result.before}</span>
                  <span class="text-sm text-primary font-semibold">{result.after}</span>
                </div>
              </div>
            ))}
          </div>
        </div>

        <div class="glass-card animate-on-scroll z-500" data-animation="fade-in-up" data-delay="400">
          <div class="flex items-center justify-between mb-6 animate-on-scroll" data-animation="slide-in-right" data-delay="500">
            <div>
              <h3 class="font-display text-xl font-bold">{caseStudies[1].client}</h3>
              <p class="text-sm text-muted-foreground">{caseStudies[1].industry}</p>
            </div>
            <span class="text-4xl animate-on-scroll" data-animation="rotate-in" data-delay="600">üìä</span>
          </div>

          <div class="space-y-4">
            {caseStudies[1].results.map((result, idx) => (
              <div class="flex items-center justify-between animate-on-scroll" data-animation="fade-in-up" data-delay={600 + (idx * 100)}>
                <span class="text-sm text-muted-foreground">{result.metric}</span>
                <div class="flex items-center gap-3">
                  <span class="text-sm text-red-400 line-through">{result.before}</span>
                  <span class="text-sm text-primary font-semibold">{result.after}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="relative py-20 z-500" data-animate-section>
    <div class="container mx-auto px-6 text-center">
      <div>
        <h2 class="font-display text-3xl md:text-4xl font-bold mb-6 animate-on-scroll" data-animation="fade-in-up" data-delay="100">
          ¬øQuieres estos resultados?
        </h2>
        <a href="/contacto" class="btn-magnetic inline-flex animate-on-scroll" data-animation="scale-in-bounce" data-delay="300">
          <span>Hablemos de tu Proyecto</span>
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Estilos espec√≠ficos del componente */
  
  /* Ocultar elementos antes de animar */
  .animate-on-scroll {
    opacity: 0;
  }

  /* Elementos visibles despu√©s de animar */
  .animate-on-scroll.is-visible {
    opacity: 1;
  }

  .tech-tag {
    border-radius: 9999px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background-color: rgba(255, 255, 255, 0.05);
    padding: 0.5rem 1.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: white;
    cursor: default;
    transition: all 0.3s ease;
  }

  .tech-tag:hover {
    border-color: rgba(0, 255, 255, 0.5);
    background-color: rgba(0, 255, 255, 0.1);
    transform: translateY(-2px);
  }

  .glass-card {
    background-color: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
    padding: 1.5rem;
  }

  .glass-card-primary {
    background-color: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 255, 255, 0.3);
    border-radius: 1rem;
    padding: 1.5rem;
  }

  .text-primary {
    color: var(--color-cyan-glow);
  }

  .text-muted-foreground {
    color: rgb(156, 163, 175);
  }

  .border-muted-foreground {
    border-color: rgb(156, 163, 175);
  }

  .font-display {
    font-family: 'Inter', system-ui, sans-serif;
    font-weight: 700;
  }

  .btn-magnetic {
    display: inline-flex;
    padding: 1rem 2rem;
    border-radius: 9999px;
    background: linear-gradient(to right, #06b6d4, #9333ea);
    color: white;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-magnetic:hover {
    box-shadow: 0 20px 25px -5px rgba(6, 182, 212, 0.5);
    transform: translateY(-2px) scale(1.05);
  }
</style>

<script>
  // Intersection Observer para activar animaciones solo cuando las secciones son visibles
  function initScrollAnimations() {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Animar todos los elementos dentro de la secci√≥n
          const animatedElements = entry.target.querySelectorAll('.animate-on-scroll');
          
          animatedElements.forEach((el) => {
            const animationType = el.getAttribute('data-animation');
            const delay = el.getAttribute('data-delay') || '0';
            
            // Aplicar delay y clase de animaci√≥n
            setTimeout(() => {
              el.classList.add(`animate-${animationType}`);
              el.classList.add('is-visible');
            }, parseInt(delay));
          });

          // Dejar de observar esta secci√≥n
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observar todas las secciones con animaciones
    const sections = document.querySelectorAll('[data-animate-section]');
    sections.forEach(section => {
      observer.observe(section);
    });
  }

  // Ejecutar en carga inicial
  document.addEventListener('DOMContentLoaded', initScrollAnimations);
  
  // Ejecutar en navegaci√≥n de Astro
  document.addEventListener('astro:page-load', initScrollAnimations);
</script>
---
// src/pages/servicios.astro
import Layout from '../layouts/Layout.astro';

const services = [
  {
    title: 'Inteligencia Artificial',
    description: 'Chatbots conversacionales, automatización de procesos y análisis predictivo. Integramos IA que trabaja 24/7 para tu negocio.',
    features: ['Chatbots GPT-4', 'Automatización', 'Análisis Predictivo'],
    gradient: 'from-violet-500 to-purple-600',
    size: 'short',
  },
  {
    title: 'SEO Técnico Avanzado',
    description: 'Posicionamiento orgánico con arquitectura optimizada. Core Web Vitals perfectos garantizados.',
    features: ['Auditoría Técnica', 'Schema Markup', 'Link Building'],
    gradient: 'from-cyan-500 to-blue-600',
    size: 'mid',
  },
  {
    title: 'Velocidad de Carga',
    description: 'Tu web carga en menos de 1 segundo. Optimización de imágenes, CDN global y caché inteligente.',
    features: ['< 1s Load Time', 'CDN Global', 'Lazy Loading'],
    gradient: 'from-emerald-500 to-teal-600',
    size: 'short',
  },
  {
    title: 'Diseño UI/UX Premium',
    description: 'Interfaces que convierten. Diseño centrado en el usuario con identidad visual única.',
    features: ['Design System', 'Prototipado', 'User Testing'],
    gradient: 'from-pink-500 to-rose-600',
    size: 'mid',
  },
  {
    title: 'Desarrollo Full-Stack',
    description: 'Arquitectura escalable con las mejores tecnologías. Código limpio, documentado y mantenible.',
    features: ['React/Next.js', 'Node.js', 'PostgreSQL'],
    gradient: 'from-orange-500 to-red-600',
    size: 'large',
  },
  {
    title: 'Escalabilidad',
    description: 'Protección SSL, firewalls, backups automáticos y cumplimiento GDPR incluido.',
    features: ['SSL Premium', 'WAF', 'GDPR Ready'],
    gradient: 'from-slate-500 to-zinc-600',
    size: 'small',
  },
  {
    title: 'Integración de APIs',
    description: 'Conectamos tu web con cualquier servicio: pagos, CRM, email marketing, analytics.',
    features: ['Stripe', 'HubSpot', 'Zapier'],
    gradient: 'from-yellow-500 to-amber-600',
    size: 'small',
  },
  {
    title: 'Analytics Avanzado',
    description: 'Dashboard personalizado con métricas en tiempo real. Toma decisiones basadas en datos.',
    features: ['Real-time Data', 'Heatmaps', 'A/B Testing'],
    gradient: 'from-indigo-500 to-blue-600',
    size: 'small',
  },
  {
    title: 'Seguridad Empresarial',
    description: 'Protección SSL, firewalls, backups automáticos y cumplimiento GDPR incluido.',
    features: ['SSL Premium', 'WAF', 'GDPR Ready'],
    gradient: 'from-slate-500 to-zinc-600',
    size: 'mid',
  },
];
---

<Layout>
  <section class="relative pt-32 pb-20 overflow-hidden z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="max-w-4xl animate-on-scroll" data-animation="fade-in-up">
        <span class="text-cyan-400 font-medium uppercase tracking-widest text-sm mb-4 block">
          SERVICIOS
        </span>
        <h1 class="font-icons text-5xl md:text-7xl font-bold mb-6 leading-tight">
          La Ingeniería detrás de <span class="text-gradient">tu Éxito Digital</span>
        </h1>
        <p class="text-xl text-gray-400 max-w-2xl">
          Cada servicio está diseñado para eliminar fricción, aumentar conversiones 
          y crear una experiencia de usuario inolvidable.
        </p>
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="relative z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="grid md:grid-cols-4 gap-6">
        {services.map((service, index) => (
          <div 
            class={`group relative rounded-3xl border border-white/10 bg-white/5 p-8 backdrop-blur-sm transition-all duration-500 hover:border-white/20 hover:bg-white/10 animate-on-scroll
            ${service.size === 'mid' ? 'md:col-span-2' : ''}
            ${service.size != 'mid' ? 'md:col-span-1' : ''}`}
            data-animation="fade-in-up"
            data-delay={index * 100}
          >
            <!-- Icon -->
            <div class={`flex h-14 w-14 items-center justify-center rounded-2xl bg-gradient-to-br ${service.gradient} mb-6`}>
              <div class="h-7 w-7"></div>
            </div>
            
            <!-- Title -->
            <h3 class="font-icons text-2xl font-semibold text-white mb-3 flex items-center gap-2">
              {service.title}
              <svg class="h-5 w-5 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M17 7H7M17 7v10" />
              </svg>
            </h3>
            
            <!-- Description -->
            <p class="text-gray-400 mb-6 leading-relaxed">
              {service.description}
            </p>
            
            <!-- Features Tags -->
            <div class="flex flex-wrap gap-2">
              {service.features.map((feature) => (
                <span class="rounded-full border border-white/10 bg-white/5 py-2 px-5 text-xs text-gray-400">
                  {feature}
                </span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Process Section -->
  <section class="relative py-6 mt-15 border-t border-white/5 z-500" data-animate-section>
    <div class="container mx-auto px-6">
      <div class="text-center mb-20 animate-on-scroll" data-animation="fade-in-up">
        <span class="text-cyan-400 font-medium uppercase tracking-widest text-sm mb-4 block">
          PROCESO
        </span>
        <h2 class="font-icons text-4xl md:text-5xl font-bold">
          Metodología de <span class="text-gradient">Alto Impacto</span>
        </h2>
      </div>

      <div class="grid md:grid-cols-4 gap-8">
        {[
          { step: '01', title: 'Descubrimiento', desc: 'Análisis profundo de tu negocio y objetivos' },
          { step: '02', title: 'Estrategia', desc: 'Plan detallado con KPIs medibles' },
          { step: '03', title: 'Ejecución', desc: 'Desarrollo ágil con entregas semanales' },
          { step: '04', title: 'Optimización', desc: 'Mejora continua basada en datos' },
        ].map((item, index) => (
          <div 
            class="text-center animate-on-scroll"
            data-animation="fade-in-up"
            data-delay={index * 100 + 300}
          >
            <div class="font-icons text-6xl font-bold text-gradient mb-4">
              {item.step}
            </div>
            <h3 class="font-icons text-xl font-semibold mb-2 text-white">{item.title}</h3>
            <p class="text-gray-400 text-sm">{item.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="relative py-20 z-500" data-animate-section>
    <div class="container mx-auto px-6 text-center">
      <div class="animate-on-scroll" data-animation="scale-in" data-delay="200">
        <h2 class="font-icons text-3xl md:text-4xl font-bold mb-6 text-white">
          ¿Listo para empezar?
        </h2>
        <a 
          href="/planes" 
          class="inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-cyan-500 to-purple-600 px-8 py-4 font-semibold text-white transition-transform duration-300 hover:scale-105"
        >
          <span>Ver Planes y Precios</span>
        </a>
      </div>
    </div>
  </section>
</Layout>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(2rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in-scale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-fade-in {
    animation: fade-in-up 0.8s ease-out forwards;
  }

  .animate-fade-in-scale {
    animation: fade-in-scale 0.6s ease-out forwards;
    animation-delay: 0.2s;
  }

  /* Ocultar elementos antes de animar */
  .animate-on-scroll {
    opacity: 0;
  }

  /* Elementos visibles después de animar */
  .animate-on-scroll.is-visible {
    opacity: 1;
  }
</style>

<script>
  // Intersection Observer para activar animaciones solo cuando las secciones son visibles
  function initScrollAnimations() {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Animar todos los elementos dentro de la sección
          const animatedElements = entry.target.querySelectorAll('.animate-on-scroll');
          
          animatedElements.forEach((el) => {
            const animationType = el.getAttribute('data-animation');
            const delay = el.getAttribute('data-delay') || '0';
            
            // Aplicar delay y clase de animación
            setTimeout(() => {
              el.classList.add(`animate-${animationType}`);
              el.classList.add('is-visible');
            }, parseInt(delay));
          });

          // Dejar de observar esta sección
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observar todas las secciones con animaciones
    const sections = document.querySelectorAll('[data-animate-section]');
    sections.forEach(section => {
      observer.observe(section);
    });
  }

  // Ejecutar en carga inicial
  document.addEventListener('DOMContentLoaded', initScrollAnimations);
  
  // Ejecutar en navegación de Astro
  document.addEventListener('astro:page-load', initScrollAnimations);
</script>
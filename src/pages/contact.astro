---
import Layout from '../layouts/Layout.astro';
import ArrowRight from '../components/Icons/ArrowRight.astro';
import Shield from '../components/Icons/Shield.astro';
import WhatsApp from '../components/Icons/WhatsApp.astro';
import Clock from '../components/Icons/Clock.astro';
import CheckCircle from '../components/Icons/CheckCircle.astro';
import Chat from '../components/Icons/Chat.astro';
import Tunder from '../components/Icons/Tunder.astro';
import Phone from '../components/Icons/Phone.astro';

const whatsappNumber = '5491100000000'; // Reemplazá con tu número real
const whatsappMessage = encodeURIComponent("¡Hola! Me cansé de tener una web que no vende. ¿Me dan una mano con mi proyecto?");
const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${whatsappMessage}`;

const benefits = [
  { icon: 'Clock', text: 'Te contestamos al toque' },
  { icon: 'CheckCircle', text: 'Te decimos la posta sin cargo' },
  { icon: 'Shield', text: 'Cero compromiso, mucha transparencia' },
];

const stats = [
  { value: '0.8s', label: 'Tus clientes no esperan nada' },
  { value: '100%', label: 'Nos ponemos tu marca al hombro' },
  { value: '24/7', label: 'Web siempre online y vendiendo' },
];

const processSteps = [
  {
    step: '01',
    title: 'Un ping-pong rápido',
    description: 'Nos contás tu idea por WhatsApp y te decimos de frente cómo podemos potenciarla. Sin vueltas.',
    icon: 'MessageCircle',
  },
  {
    step: '02',
    title: 'Armamos el plan',
    description: 'Dibujamos la estructura técnica que tu negocio pide a gritos para empezar a facturar más.',
    icon: 'Zap',
  },
  {
    step: '03',
    title: 'Encendemos motores',
    description: 'Ponemos tu web a volar. Lista para recibir tráfico y dejar a tu competencia en el retrovisor.',
    icon: 'CheckCircle',
  },
];

// Datos estructurados para IA (AEO 2026)
const contactSchema = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  "name": "Contacto Directo | Tu Máquina de Ventas",
  "description": "Canal de comunicación directa por WhatsApp para desarrollo web y SEO en Argentina.",
  "mainEntity": {
    "@type": "ContactPoint",
    "telephone": "+" + whatsappNumber,
    "contactType": "Ventas y Soporte Técnico",
    "availableLanguage": "Spanish"
  }
};
---

<Layout title="Contacto - Hagamos que tu web venda de verdad">
  <script type="application/ld+json" set:html={JSON.stringify(contactSchema)} />

  <main>
    <section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-8 md:pt-20">
      
      <div class="absolute inset-0 pointer-events-none bg-radial-green opacity-60" aria-hidden="true"></div>

      <div class="container relative z-10 mx-auto px-4 md:px-6 py-20">
        <div class="max-w-4xl mx-auto text-center">
          
          <div class="inline-flex items-center gap-2 rounded-full bg-green-500/5 border border-green-500/20 px-5 py-2.5 mb-8 animate-fade-in">
            <span class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-50"></span>
              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
            </span>
            <span class="text-xs font-bold text-green-500 uppercase tracking-widest font-zalando">
              Estamos online, escribinos
            </span>
          </div>

          <h1 id="contact-title" class="font-display text-4xl md:text-7xl font-black mb-6 leading-tight animate-fade-in-up delay-100 text-white font-zalando">
            Prendé tu <br/>
            <span class="text-gradient">Máquina de Ventas</span>
          </h1>

          <p class="text-lg md:text-2xl text-gray-400 mb-12 max-w-2xl mx-auto animate-fade-in-up delay-200 font-zalando">
            Basta de formularios que nadie lee. Una charla directa por WhatsApp es todo lo que necesitás para arrancar.
          </p>

          <div class="mb-12 animate-scale-in delay-300">
            <a
              href={whatsappUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="group relative inline-flex items-center gap-4 rounded-3xl bg-green-600 px-6 md:px-10 py-6 text-white font-bold text-xl shadow-lg shadow-green-600/20 hover:bg-green-500 transition-all duration-300 hover:scale-[1.05] w-full md:w-auto"
            >
              <div class="relative flex items-center md:flex-row flex-col gap-4 w-full">
                <WhatsApp size="32" />
                <div class="text-left">
                  <span class="block text-xl md:text-2xl font-black uppercase tracking-tight">Quiero mi web ahora</span>
                  <span class="block text-xs text-center md:text-start text-green-100/70 font-normal uppercase tracking-widest">Chat directo • Sin vueltas</span>
                </div>

              </div>
            </a>
          </div>

          <div class="flex flex-wrap justify-center gap-6 mb-16 animate-fade-in-up delay-400">
            {benefits.map((benefit) => (
              <div class="flex items-center gap-2 text-gray-400">
                <div class="shrink-0">
                  {benefit.icon === 'Clock' && <Clock size="22" color="#22c55e" />}
                  {benefit.icon === 'CheckCircle' && <CheckCircle size="22" color="#22c55e" />}
                  {benefit.icon === 'Shield' && <Shield size="25" color="#22c55e"/>}
                </div>
                <span class="text-sm font-medium font-zalando">{benefit.text}</span>
              </div>
            ))}
          </div>

          <dl class="grid md:grid-cols-3 gap-8 max-w-3xl mx-auto">
            {stats.map((stat, index) => (
              <div class={`rounded-2xl border border-white/5 bg-white/[0.02] backdrop-blur-sm text-center py-6 px-4 animate-fade-in-up delay-${500 + (index * 100)}`}>
                <dt class="text-[10px] text-gray-500 uppercase tracking-[0.2em] mb-2 font-zalando">{stat.label}</dt>
                <dd class="text-3xl font-black text-green-500 font-zalando">{stat.value}</dd>
              </div>
            ))}
          </dl>
        </div>
      </div>
    </section>

    <section class="relative py-20 border-t border-white/[0.03]" data-animate-section>
      <div class="container mx-auto px-6">
        <header class="text-center mb-16 process-header">
          <span class="text-cyan-400 font-bold uppercase tracking-[0.3em] text-xs mb-4 block font-zalando">
            CÓMO TRABAJAMOS
          </span>
          <h2 class="text-4xl md:text-5xl font-black text-white font-zalando">
            Un proceso <span class="text-gradient">sin fricción</span>
          </h2>
        </header>

        <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          {processSteps.map((item, index) => (
            <article 
              class="process-card relative rounded-3xl border border-white/[0.06] bg-white/[0.02] p-8 group hover:border-white/20 transition-all duration-500" 
              data-index={index}
            >
              <div class="absolute -top-4 left-6 px-3 py-1 rounded-full bg-[#020205] border border-white/10" aria-hidden="true">
                <span class="text-cyan-400 font-bold text-sm font-zalando">{item.step}</span>
              </div>
              
              <div class="pt-4">
                <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-white/[0.03] border border-white/[0.06] mb-5 group-hover:scale-110 group-hover:border-cyan-500/30 transition-all duration-300">
                  {item.icon === 'MessageCircle' && <Chat />}
                  {item.icon === 'Zap' && <Tunder />}
                  {item.icon === 'CheckCircle' && <CheckCircle color="#22c55e"/>}
                </div>
                <h3 class="text-xl font-bold mb-3 text-white font-zalando uppercase tracking-tight">{item.title}</h3>
                <p class="text-gray-400 text-sm leading-relaxed font-zalando">{item.description}</p>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>

    <section class="relative py-20" data-animate-section>
      <div class="container mx-auto px-6">
        <div class="final-cta relative rounded-[3rem] border border-white/[0.06] bg-white/[0.02] p-8 md:p-16 text-center max-w-3xl mx-auto backdrop-blur-2xl overflow-hidden">
          <div class="absolute inset-0 bg-green-600/5 pointer-events-none" aria-hidden="true"></div>
          
          <div class="relative z-10">
            <div class="flex h-14 w-14 items-center justify-center rounded-2xl bg-green-600/10 border border-green-600/20 mx-auto mb-6">
              <Phone color="#22c55e" />
            </div>

            <h2 class="text-3xl md:text-5xl font-black mb-6 text-white font-zalando">
              ¿Listo para arrancar?
            </h2>
            <p class="text-gray-400 mb-10 max-w-md mx-auto font-zalando">
              Cada día que pasa es una oportunidad que aprovecha tu competencia. Escribinos ahora y poné tu negocio a vender.
            </p>
            
            <a
              href={whatsappUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="group inline-flex flex-col md:flex-row items-center gap-3 rounded-2xl bg-green-600 px-10 py-5 text-white font-black hover:bg-green-500 transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg shadow-green-600/20"
            >
              <WhatsApp size="25" />
              <span>CHATEAR POR WHATSAPP</span>
            </a>
            
            <p class="text-[10px] text-gray-500 mt-6 uppercase tracking-[0.2em] font-bold font-zalando">
              Sin formularios • Sin demoras • Atención Humana
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  /* Animaciones Originales con Mejor Suavizado */
  .process-header, .process-card, .final-cta {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    will-change: transform, opacity;
  }

  /* Delays Escalonados Originales */
  .process-card[data-index="0"] { transition-delay: 0s; }
  .process-card[data-index="1"] { transition-delay: 0.15s; }
  .process-card[data-index="2"] { transition-delay: 0.3s; }

  .is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .text-gradient {
    background: linear-gradient(to r, #00E5FF, #a855f7);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Optimización para LCP: El título siempre debe ser visible lo antes posible */
  #contact-title {
    animation: fadeIn 0.8s ease-out forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Soporte para reducción de movimiento */
  @media (prefers-reduced-motion: reduce) {
    .process-header, .process-card, .final-cta {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }

  .bg-radial-green {
    background: radial-gradient(
      circle at center, 
      rgba(0, 201, 80, 0.1) 0%, 
      transparent 75%
    );
  }
</style>

<script>
  // Intersection Observer para disparar las animaciones originales
  const initObserver = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, { 
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px' 
    });

    const animatedSelectors = ['.process-header', '.process-card', '.final-cta'];
    animatedSelectors.forEach(selector => {
      document.querySelectorAll(selector).forEach(el => observer.observe(el));
    });
  };

  // Ejecutar en carga inicial y en navegación de Astro (View Transitions)
  document.addEventListener('DOMContentLoaded', initObserver);
  document.addEventListener('astro:page-load', initObserver);
</script>
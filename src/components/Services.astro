---
import { Image } from 'astro:assets';
import AI from '../assets/images/AI.webp'
import SEC from '../assets/images/Security.webp'
import SEO from '../assets/images/SEO.webp'
import UX from '../assets/images/UX.webp'

const services = [
  {
    id: 'seo',
    title: 'SEO de Nueva Generación (AEO)',
    description: 'No solo buscamos clics, buscamos dominancia. Preparamos tu arquitectura para que Google te indexe y las IAs te recomienden como la autoridad máxima de tu sector.',
    image: SEO,
    alt: "Consultoría de SEO técnico y Answer Engine Optimization para empresas líderes."
  },
  {
    id: 'ia',
    title: 'Agentes de IA y Arquitectura RAG',
    description: 'Implementamos infraestructuras de Recuperación Aumentada (RAG) utilizando bases de datos vectoriales de baja latencia (Pinecone/Weaviate). Nuestros agentes autónomos integran modelos LLM ajustados para reducir alucinaciones en un 98%, automatizando el embudo de ventas mediante procesamiento de lenguaje natural (NLP) y calificación de leads en tiempo real con integración API directa a tu CRM.',
    image: AI,
    alt: "Esquema de arquitectura RAG con agentes de IA autónomos para automatización corporativa."
  },
  {
    id: 'ux',
    title: 'Experiencias de Alta Conversión',
    description: 'Interfaces que enamoran al usuario y destruyen la fricción de compra. Diseñamos flujos donde cada píxel tiene un único objetivo: convertir visitantes en clientes.',
    image: UX,
    alt: "Diseño de experiencia de usuario enfocado en maximizar el ROI y la retención."
  },
  {
    id: 'dev',
    title: 'Infraestructura Edge y Zero Trust',
    description: 'Desplegamos aplicaciones en el Edge (Cloudflare/Vercel) para garantizar tiempos de carga sub-segundo globalmente mediante renderizado estático e incremental (ISR). La arquitectura se blinda con protocolos Zero Trust y cifrado TLS 1.3 de grado bancario, asegurando la integridad de datos bajo estándares ISO 27001 y protección nativa contra ataques DDoS de capa 7, permitiendo escalar a millones de peticiones sin degradar el performance.',
    image: SEC,
    alt: "Ingeniería de software con seguridad Zero Trust y despliegue global en el Edge."
  }
];

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Servicios de Ingeniería Digital y IA 2026",
  "itemListElement": services.map((s, i) => ({
    "@type": "ListItem",
    "position": i + 1,
    "item": {
      "@type": "Service",
      "name": s.title,
      "description": s.description,
      "provider": { "@type": "Organization", "name": "Tu Agencia" }
    }
  }))
};
---

<section id="servicios" class="relative py-8 md:py-32 backdrop-blur-[4px] md:backdrop-blur-[0px]  md:hover:backdrop-blur-[8px] overflow-hidden ">
  <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

  <div class="container mx-auto px-4 relative z-10">
    <header class="text-center mb-16 md:mb-24">
      <h2 class="text-4xl md:text-7xl font-black text-white mb-6">
        Servicios de <span class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent">Ingeniería</span>
      </h2>
      <p class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto">
        Arquitecturas digitales diseñadas para el ecosistema de búsqueda sintética.
      </p>
    </header>

    <ul class="grid md:grid-cols-[1.4fr_1fr] gap-6 md:gap-8 max-w-7xl mx-auto list-none p-0 items-stretch">
      {services.map((service, index) => (
        <li class="flex">
          <article 
            class="service-card group relative flex flex-col w-full bg-[#0a0a1a] rounded-3xl p-4 md:p-8 border border-white/5 hover:border-cyan-500/30 transition-all duration-500"
            data-parallax-speed={0.03 + (index * 0.01)}
          >
            <div class="absolute inset-0 bg-gradient-to-br from-cyan-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl -z-10"></div>
            
            <div class="aspect-video md:aspect-square mb-8 rounded-2xl overflow-hidden border border-white/10 bg-black">
              <Image 
                src={service.image} 
                alt={service.alt}
                width={800}
                height={800}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
              />
            </div>

            <div class="flex flex-col flex-grow">
              <h3 class="text-2xl md:text-3xl font-bold text-white mb-4 group-hover:text-cyan-400 transition-colors">
                {service.title}
              </h3>
              <p class="text-gray-400 text-sm md:text-base leading-relaxed flex-grow">
                {service.description}
              </p>
            </div>

            <div class="absolute top-6 right-6">
              <span class="absolute inset-0 rounded-full bg-cyan-500 animate-ping opacity-0 group-hover:opacity-40"></span>
              <span class="relative block w-2 h-2 rounded-full bg-cyan-500"></span>
            </div>
          </article>
        </li>
      ))}
    </ul>
  </div>
  <a href="/services" target="_blank" class="relative group flex items-center gap-3 text-gray-400 hover:text-white/90 block w-[21rem] m-auto mt-10 text-xl font-bold py-2 border-b-1 border-white/10"> 
      <span class="block w-full text-center">Ver todas las Tecnologías</span>
      <svg class="absolute right-0 top-3 h-5 w-5 text-gray-400 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M17 7H7M17 7v10" />
    </svg>
  </a>
</section>



<script>
  // Observer para entrada suave
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('opacity-100', 'translate-y-0');
        entry.target.classList.remove('opacity-0', 'translate-y-10');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.service-card').forEach(card => {
    card.classList.add('opacity-0', 'translate-y-10', 'transition-all', 'duration-1000');
    observer.observe(card);
  });
</script>
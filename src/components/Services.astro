---
const services = [
  {
    id: 'seo',
    title: 'SEO Técnico y Arquitectura',
    description: 'Optimización profunda para motores de búsqueda. Código limpio, velocidad de carga ultra-rápida y estructura escalable para dominar resultados orgánicos.',
    image: '/images/seo-layers.png',
    size: 'large'
  },
  {
    id: 'ia',
    title: 'Automatización con IA',
    description: 'Integración de inteligencia artificial para personalizar experiencias, predecir tendencias y optimizar conversiones en tiempo real.',
    image: '/images/ai-brain.png',
    size: 'large'
  },
  {
    id: 'ux',
    title: 'UX de Alto Rendimiento',
    description: 'Diseño centrado en el usuario que maximiza la retención. Flujos intuitivos, microinteracciones y accesibilidad premium.',
    image: '/images/ux-screens.png',
    size: 'large'
  },
  {
    id: 'dev',
    title: 'Desarrollo Escalable y Seguridad',
    description: 'Soluciones robustas construidas para el crecimiento. Arquitectura segura, APIs flexibles y mantenimiento proactivo.',
    image: '/images/cloud-security.png',
    size: 'large'
  }
];
---

<section id="servicios" class="relative py-10 md:py-32 overflow-hidden bg-transparent">
  
  <!-- Efectos de fondo -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-[20%] right-[10%] w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[150px]"></div>
    <div class="absolute bottom-[10%] left-[5%] w-[400px] h-[400px] bg-blue-600/10 rounded-full blur-[150px]"></div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 relative z-10">
    
    <!-- Header de la sección -->
    <div class="text-center mb-16 md:mb-20">
      <h2 class="services-title text-4xl md:text-6xl lg:text-7xl font-black mb-6 opacity-0">
        <span class="text-white">Nuestros Servicios de </span>
        <span class="bg-gradient-to-r from-[#00E5FF] via-[#0099ff] to-[#a855f7] bg-clip-text text-transparent">Ingeniería</span>
      </h2>
      
      <p class="services-subtitle text-lg md:text-xl text-gray-400 max-w-3xl mx-auto opacity-0">
        Creando Máquinas de Venta de Alto Rendimiento
      </p>
    </div>

    <!-- Grid 2x2 de servicios -->
    <div class="grid md:grid-cols-[1.4fr_1fr] gap-6 md:gap-8 max-w-7xl mx-auto">
      {services.map((service, index) => (
        <div 
          class="service-card group relative bg-gradient-to-br from-[#0a0a1a]/80 to-[#020208]/80 backdrop-blur-sm rounded-3xl p-6 md:p-8 border border-white/5 hover:border-[#00E5FF]/30 transition-all duration-500 opacity-0"
          data-index={index}
        >
          <!-- Efecto de glow al hover -->
          <div class="absolute inset-0 bg-gradient-to-br from-[#0099ff]/5 to-[#a855f7]/5 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl"></div>
          
          <div class="relative z-10">
            <!-- Contenedor de imagen -->
            <div class="relative mb-6 md:mb-8 aspect-square bg-gradient-to-br from-[#0a0a1a] to-[#020208] rounded-2xl overflow-hidden border border-white/5 flex items-center justify-center group-hover:scale-[1.02] transition-transform duration-500">
              <!-- Placeholder para imagen - Reemplaza con tus imágenes reales -->
              <div class="w-full h-full flex items-center justify-center p-8">
                <div class="text-center">
                  <svg class="w-20 h-20 mx-auto mb-3 text-[#00E5FF]/20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  <p class="text-xs text-gray-700">{service.title}</p>
                </div>
              </div>

              <!-- Efecto de brillo -->
              <div class="absolute inset-0 bg-gradient-to-br from-[#00E5FF]/10 via-transparent to-[#a855f7]/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </div>

            <!-- Contenido de texto -->
            <div class="space-y-4">
              <h3 class="text-2xl md:text-3xl font-bold text-white group-hover:text-[#00E5FF] transition-colors duration-300">
                {service.title}
              </h3>
              <p class="text-sm md:text-base text-gray-400 leading-relaxed">
                {service.description}
              </p>
            </div>

            <!-- Indicador decorativo -->
            <div class="absolute top-6 right-6 w-2 h-2 bg-[#00E5FF] rounded-full opacity-50 group-hover:opacity-100 transition-opacity duration-300"></div>
            <div class="absolute top-6 right-6 w-2 h-2 bg-[#00E5FF] rounded-full animate-ping opacity-0 group-hover:opacity-75"></div>
          </div>

          <!-- Borde animado al hover -->
          <div class="absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
            <div class="absolute inset-[-1px] bg-gradient-to-r from-[#00E5FF] via-[#0099ff] to-[#a855f7] rounded-3xl blur-sm opacity-20"></div>
          </div>
        </div>
      ))}
    </div>

    <!-- Decoración de figura geométrica (esquina superior derecha) -->
    <div class="absolute top-[15%] right-[5%] w-64 h-64 hidden lg:block opacity-20">
      <div class="pyramid-3d"></div>
    </div>

  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in-scale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .services-title {
    animation: fade-in-up 0.8s ease-out 0.2s forwards;
  }

  .services-subtitle {
    animation: fade-in-up 0.8s ease-out 0.4s forwards;
  }

  .service-card {
    animation: fade-in-scale 0.8s ease-out forwards;
  }

  .service-card:nth-child(1) { animation-delay: 0.6s; }
  .service-card:nth-child(2) { animation-delay: 0.75s; }
  .service-card:nth-child(3) { animation-delay: 0.9s; }
  .service-card:nth-child(4) { animation-delay: 1.05s; }

  /* Pirámide 3D decorativa */
  .pyramid-3d {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    animation: rotate-pyramid 20s linear infinite;
  }

  .pyramid-3d::before {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-left: 128px solid transparent;
    border-right: 128px solid transparent;
    border-bottom: 256px solid rgba(0, 229, 255, 0.1);
    transform: rotateX(-30deg);
  }

  @keyframes rotate-pyramid {
    from {
      transform: rotateY(0deg) rotateX(-20deg);
    }
    to {
      transform: rotateY(360deg) rotateX(-20deg);
    }
  }

  /* Hover effects mejorados */
  .service-card:hover {
    transform: translateY(-8px);
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .service-card {
      min-height: auto;
    }
  }
</style>

<script>
  // Intersection Observer para animaciones al hacer scroll
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('in-view');
      }
    });
  }, observerOptions);

  // Observar las tarjetas de servicios
  document.querySelectorAll('.service-card').forEach(card => {
    observer.observe(card);
  });

  // Efecto parallax sutil al scroll
  let ticking = false;
  
  window.addEventListener('scroll', () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        const cards = document.querySelectorAll('.service-card') as NodeListOf<HTMLDivElement>;
        const scrollY = window.scrollY;
        
        cards.forEach((card, index) => {
          const rect = card.getBoundingClientRect();
          const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
          
          if (isVisible) {
            const speed = 0.02 + (index * 0.01);
            const yPos = -(scrollY * speed);
            card.style.transform = `translateY(${yPos}px)`;
          }
        });
        
        ticking = false;
      });
      ticking = true;
    }
  });
</script>